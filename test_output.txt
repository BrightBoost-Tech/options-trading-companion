============================= test session starts ==============================
platform linux -- Python 3.12.12, pytest-9.0.2, pluggy-1.6.0
rootdir: /app
plugins: anyio-4.12.0
collected 2 items

packages/quantum/tests/test_v3_1_finalization.py .F                      [100%]

=================================== FAILURES ===================================
________ TestExecutionService.test_rebalance_path_no_iv_regime_service _________

self = <packages.quantum.tests.test_v3_1_finalization.TestExecutionService object at 0x7fb405df2870>

    def test_rebalance_path_no_iv_regime_service(self):
        # Read api.py content and check for strings
        with open("packages/quantum/api.py", "r") as f:
            content = f.read()

>       assert "IVRegimeService" not in content.replace("# IVRegimeService", "") # Ignore the specific comment if needed, but better if gone.
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AssertionError: assert 'IVRegimeService' not in 'import os\n...des\n    }\n'
E
E         'IVRegimeService' is contained here:
E            Replaced IVRegimeService with V3 logic
E         ?           +++++++++++++++
E
E               positions_for_conviction: List[PositionDescriptor] = []
E           ...
E
E         ...Full output truncated (185 lines hidden), use '-vv' to show

packages/quantum/tests/test_v3_1_finalization.py:77: AssertionError
=============================== warnings summary ===============================
packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:20
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:20: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class BaseBucket(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:130
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:130: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SignedUrlJsonResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:134
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:134: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SignedUrlsJsonItem(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:143
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:143: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class CreateSignedUploadUrlOptions(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:161
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:161: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class MetadataConfiguration(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:167
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:167: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListIndexesOptions(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:173
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:173: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListIndexesResponseItem(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:177
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:177: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorIndexesResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:182
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:182: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorIndex(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:194
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:194: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GetVectorIndexResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:201
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:201: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorData(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:205
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:205: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorObject(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:211
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:211: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorMatch(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:218
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:218: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GetVectorsResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:222
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:222: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorsResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:227
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:227: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class QueryVectorsResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:231
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:231: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AnalyticsBucket(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:245
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:245: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AnalyticsBucketDeleteResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:249
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:249: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorBucketEncryptionConfiguration(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:254
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:254: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorBucket(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:260
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:260: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GetVectorBucketResponse(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:264
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:264: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorBucketsItem(BaseModel, extra=Extra.ignore):

packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:268
  /app/packages/quantum/venv/lib/python3.12/site-packages/storage3/types.py:268: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorBucketsResponse(BaseModel, extra=Extra.ignore):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED packages/quantum/tests/test_v3_1_finalization.py::TestExecutionService::test_rebalance_path_no_iv_regime_service
=================== 1 failed, 1 passed, 23 warnings in 0.58s ===================
